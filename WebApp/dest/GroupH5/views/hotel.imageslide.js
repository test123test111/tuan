define(["TuanApp","TuanBaseView","TuanStore","text!HotelImageSlideTpl","cWidgetFactory","cCommonPageFactory","SmoothSlide"],function(e,t,n,r,i,s){var o=n.TuanDetailsStore.getInstance(),u=n.TuanImagesListStore.getInstance(),a,f=i.create("SmoothSlide"),l,c=s.create("TuanBaseView");return l=c.extend({pageid:"260003",hpageid:"261003",events:{"click #J_prev":"prevImg","click #J_next":"nextImg"},onCreate:function(){},onLoad:function(){var e=u.getAttr("images")||o.getAttr("images");e&&this.createSlide(e)},setHeader:function(e,t){var n=this;this.header.set({title:e+"/"+t+"å¼ ",back:!0,home:!0,view:this,events:{returnHandler:function(){n.backAction()},homeHandler:function(){n.backHome()}}})},onShow:function(){},onHide:function(){},backAction:function(){this.back()},backHome:function(t){e.tHome()},createSlide:function(e){var t=this,n,i=Lizard.P("index"),s=t.$el.find("#J_sliderWrap"),o=[],u=e&&e.length,l=function(e,r,i){n.html(i),t.setHeader(e+1,r)};i=i>0?i-1:0;if(u)for(var c=0;c<u;c++)o.push({title:e[c].title,src:e[c].large,href:"javascript:void(0)",desc:e[c].desc});o.length&&(s.parent().parent().css("height","100%"),a=new f({container:s,source:o,itemCls:".pics_show_box_items",autoplay:0,prefetch:3,currentIndex:i,width:$("body").offset().width,tpl:r,onSwitchEnd:function(){},onSwitch:function(e,t){l(e,this.count(),t.title)},onInit:function(e){n=$(this.container).find("#J_picDesc"),l(e,this.count(),this.source[e].title)}}),this.slider=a)},prevImg:function(){window.imgIndex>1&&this.slider.pre()},nextImg:function(){window.imgIndex<images.length&&this.slider.next()}}),l});