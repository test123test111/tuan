define(["TuanApp","TuanBaseView","TuanStore","text!HotelImageSlideTpl","cWidgetFactory","cCommonPageFactory","SmoothSlide"],function(e,t,n,i,o,c){var a,r,s=n.TuanDetailsStore.getInstance(),d=n.TuanImagesListStore.getInstance(),h=o.create("SmoothSlide"),u=c.create("TuanBaseView");return r=u.extend({pageid:"260003",hpageid:"261003",events:{"click #J_prev":"prevImg","click #J_next":"nextImg"},onCreate:function(){},onLoad:function(){var e=d.getAttr("images")||s.getAttr("images");e&&this.createSlide(e)},setHeader:function(e,t){var n=this;this.header.set({title:e+"/"+t+"å¼ ",back:!0,home:!0,view:this,events:{returnHandler:function(){n.backAction()},homeHandler:function(){n.backHome()}}})},onShow:function(){},onHide:function(){},backAction:function(){this.back()},backHome:function(){e.tHome()},createSlide:function(e){var t,n=this,o=Lizard.P("index"),c=n.$el.find("#J_sliderWrap"),r=[],s=e&&e.length,d=function(e,i,o){t.html(o),n.setHeader(e+1,i)};if(o=o>0?o-1:0,s)for(var u=0;s>u;u++)r.push({title:e[u].title,src:e[u].large,href:"javascript:void(0)",desc:e[u].desc});r.length&&(c.parent().parent().css("height","100%"),a=new h({container:c,source:r,itemCls:".pics_show_box_items",autoplay:0,prefetch:3,currentIndex:o,width:$("body").offset().width,tpl:i,onSwitchEnd:function(){},onSwitch:function(e,t){d(e,this.count(),t.title)},onInit:function(e){t=$(this.container).find("#J_picDesc"),d(e,this.count(),this.source[e].title)}}),this.slider=a)},prevImg:function(){window.imgIndex>1&&this.slider.pre()},nextImg:function(){window.imgIndex<images.length&&this.slider.next()}})});