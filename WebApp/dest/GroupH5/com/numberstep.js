define(["libs"],function(){function i(i){var s=function(){},t={max:9,min:1,initialVal:1,step:1,html:'<i class="minus <%if(initialVal <= min ){ %>num_invalid<%} %>">-</i><span id="J_curNum"><%=initialVal %></span><i class="plus <%if(initialVal >= max ){ %>num_invalid<%} %>">+</i>',wrap:null,disableClass:"num_invalid",onChange:s,onMax:s,onMin:s};this.options=$.extend(t,i),this.wrap=this.options.wrap,this.renderHtml(),this.els={curNumDom:this.wrap.find("#J_curNum"),plusDom:this.wrap.find(".plus"),minusDom:this.wrap.find(".minus"),flagDom:this.wrap.find("i")},this.bindEvents()}return i.prototype={constructor:i,bindEvents:function(){var i=this;this.wrap.on("click",".plus,.minus",function(s){var t=$(s.target),n=parseInt(i.els.curNumDom.text().trim()),a=t.text().trim()||t.attr("data-flag");return t.hasClass(i.options.disableClass)?!1:("+"===a&&n<i.options.max?n++:"-"===a&&n>i.options.min?n--:n=i.options.min,i.els.flagDom.removeClass(i.options.disableClass),n===i.options.min&&(t.addClass(i.options.disableClass),i.options.onMin(s)),n===i.options.max&&(t.addClass(i.options.disableClass),i.options.onMax(s)),i.els.curNumDom.html(n),void i.options.onChange.call(i))})},triggerChange:function(){this.options.onChange.call(this)},unbindEvents:function(){this.wrap.off("click")},_changeStatus:function(i,s){var t="disable"===s?"addClass":"removeClass";"+"===i?this.els.plusDom[t](this.options.disableClass):"-"===i?this.els.minusDom[t](this.options.disableClass):this.els.flagDom[t](this.options.disableClass)},disable:function(i){this._changeStatus(i,"disable")},enable:function(i){this._changeStatus(i,"enable")},renderHtml:function(){this.wrap.html(_.template(this.options.html,this.options))},getCurrentNum:function(){return this.els.curNumDom.text().trim()},setCurrentNum:function(i){this.els.curNumDom.text(i)},setOptions:function(i,s){s&&(this.options[i]=s,this.options.onChange.call(this))}},i});