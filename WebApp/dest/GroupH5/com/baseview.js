define(["c","cStore","cPageView","cCommonListPage","cUtility","cCommonPageFactory","PageHistory","cWidgetGuider","cUtility"],function(e,t,n,r,i,s,o,u,a){var f="TuanBaseView",l="TuanBaseListView",c=a.isInApp();if(s.hasPage(f)||s.hasPage(l))return;var h=new e.base.Class(t,{__propertys__:function(){this.key="P_TUAN_BURN_AFTER_READING",this.lifeTime="1H",this.defaultData={}},initialize:function($super){$super()},setOneMessage:function(e,t){this.setAttr(e,t)},getOneMessage:function(e){var t=this.getAttr(e);return t&&this.setAttr(e,""),t}}),p=h.getInstance(),d=d||{};d={"super":n.prototype,show:function(){var e=o.getLatelyView(this.getViewName())||"";this.lastViewId=e,this.__onLoad(e),this.super.show.apply(this,arguments),this.__onShow(e)},hide:function(){this.super.hide.apply(this,arguments),this.__onHide(arguments)},getViewName:function(){return this.config&&this.config.viewName},__onLoad:function(e){o.confirmForward(this.getViewName()),o.addHistory(this.getViewName(),location.href,2)},__onShow:function(){},__onHide:function(e){},getHistory:function(){return o},back:function(e,t){if(c&&Lizard.P("from_native_page")==1){u.backToLastPage({param:JSON.stringify({biz:"tuan",refresh:"1"})});return}this.setOneMessage("__lastViewName__",this.getViewName());var n=o.back(this.getViewName(),e);t===undefined&&(t=!1);if(n.jump)location.href=n.fullurl;else if(i.isInApp()){var r=/#(.*)$/.exec(n.fullurl);r&&r.length>1&&r[1]?Lizard.goTo(r[1],{viewName:n.id,cache:n.id=="list"?!0:t}):Lizard.goTo(n.fullurl,{viewName:n.id,cache:n.id=="list"?!0:t})}else Lizard.goTo(n.fullurl,{viewName:n.id,cache:n.id=="list"?!0:t})},popById:function(e){var t=o.popById(e);t||o.clearHistory()},clearHistory:function(e,t){o.clearHistory(e,t)},forwardJump:function(e,t,n,r,i){this.setOneMessage("__lastViewName__",this.getViewName()),_.isObject(n)&&(n=!1);if(n)t=o.forward(e,t,1,r),this.jump(t);else{t=o.forward(e,t,2,r);var s={viewName:e};i&&(s.cache=!0),Lizard.goTo(t,s)}},getLastViewName:function(){return this.getOneMessage("__lastViewName__")},setOneMessage:function(e,t){p.setOneMessage(e,t)},getOneMessage:function(e){return p.getOneMessage(e)},showMessage:function(e,t){this.alert.setViewData({message:e,title:t,buttons:[{text:"知道了",click:function(){this.hide()}}]}),this.alert.show()}};var v=n.extend(d);s.register({name:f,fn:v});var r=s.create("CommonListPage"),m=r.extend(d);s.register({name:l,fn:m})});