!function(a){var t=a.navigator.userAgent;if(t.indexOf("CtripWireless")>-1)return!0;var i=function(a){var t=document.location.search||document.location.hash,i=new RegExp("(\\?|&)"+a+"=([^&]+)(&|$)","i"),e=t.match(i);return e?e[2]:null},e=location.href;if(e&&e.indexOf("#")>-1){var n=location.hash,l=i("allianceid"),o=i("sid"),r=i("ouid"),c=i("sourceid"),p=i("sales"),s=[];if(l&&s.push("allianceid="+l),o&&s.push("sid="+o),r&&s.push("ouid="+r),c&&s.push("sourceid="+c),p&&s.push("sales="+p),/#home/i.test(n)){var u="/webapp/tuan/";s.length>0&&(u+="?"+s.join("&")),location.replace(u)}if(/#list/i.test(n)){var d="/webapp/tuan/list/",h=i("cityid"),f=i("kwd"),v=i("place"),g=i("lng"),m=i("lat"),w=i("ctype"),b=i("star"),j=i("price"),k=[];+h>0&&k.push("cityid="+h),f&&k.push("kwd="+f),v&&k.push("place="+v),g&&k.push("lng="+g),m&&k.push("lat="+m),w&&k.push("ctype="+w),b&&k.push("star="+b),j&&k.push("price="+j),s.length>0&&k.concat(s),k.length>0&&(d+="?"+k.join("&")),location.replace(d)}if(/#detail/i.test(n)){var x=n.match(/!(\d+)/);if(x){var y=x[1],O="/webapp/tuan/detail/"+y+".html";s.length>0&&(O+="?"+s.join("&")),location.replace(O)}}if(/#booking/i.test(n)){var A=i("detailid")||i("productid");A&&location.replace("/webapp/tuan/booking/?detailid="+A)}if(/#tuanorderdetail/i.test(n)){var C="/webapp/tuan/tuanorderdetail/",E=n.match(/!(\d+)/);if(E){var R=E[1];C+=R+".html";var W=i("from"),$=[];W&&$.push("from="+W),s.length>0&&$.concat(s),$.length>0&&(C+="?"+$.join("&"))}location.replace(C)}if(/#refund/i.test(n)){var q=n.match(/!(\d+)/);if(q){var z=q[1],B=i("from"),D="/webapp/tuan/refund/"+z+".html";s.length>0&&(D+="?"+s.join("&")),B&&(D+=(D.indexOf("?")>-1?"&":"?")+"from="+B),location.replace(D)}}}}(window);