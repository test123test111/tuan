(function(e){var t=e.navigator.userAgent;if(t.indexOf("CtripWireless")>-1)return!0;var n=function(e,t){var n=document.location.search||document.location.hash,r=new RegExp("(\\?|&)"+e+"=([^&]+)(&|$)","i"),i=n.match(r);return i?i[2]:null},r=location.href;if(r&&r.indexOf("#")>-1){var i=location.hash,s=n("allianceid"),o=n("sid"),u=n("ouid"),a=n("sourceid"),f=n("sales"),l=[];s&&l.push("allianceid="+s),o&&l.push("sid="+o),u&&l.push("ouid="+u),a&&l.push("sourceid="+a),f&&l.push("sales="+f);if(/#home/i.test(i)){var c="/webapp/tuan/";l.length>0&&(c+="?"+l.join("&")),location.replace(c)}if(/#list/i.test(i)){var h="/webapp/tuan/list/",p=n("cityid"),d=n("kwd"),v=n("place"),m=n("lng"),g=n("lat"),y=n("ctype"),b=n("star"),w=n("price"),E=[];+p>0&&E.push("cityid="+p),d&&E.push("kwd="+d),v&&E.push("place="+v),m&&E.push("lng="+m),g&&E.push("lat="+g),y&&E.push("ctype="+y),b&&E.push("star="+b),w&&E.push("price="+w),l.length>0&&E.concat(l),E.length>0&&(h+="?"+E.join("&")),location.replace(h)}if(/#detail/i.test(i)){var S=i.match(/!(\d+)/);if(S){var x=S[1],T="/webapp/tuan/detail/"+x+".html";l.length>0&&(T+="?"+l.join("&")),location.replace(T)}}if(/#booking/i.test(i)){var N=n("detailid")||n("productid");N&&location.replace("/webapp/tuan/booking/?detailid="+N)}if(/#tuanorderdetail/i.test(i)){var C="/webapp/tuan/tuanorderdetail/",k=i.match(/!(\d+)/);if(k){var L=k[1];C+=L+".html";var A=n("from"),O=[];A&&O.push("from="+A),l.length>0&&O.concat(l),O.length>0&&(C+="?"+O.join("&"))}location.replace(C)}if(/#refund/i.test(i)){var M=i.match(/!(\d+)/);if(M){var _=M[1],D=n("from"),P="/webapp/tuan/refund/"+_+".html";l.length>0&&(P+="?"+l.join("&")),D&&(P+=(P.indexOf("?")>-1?"&":"?")+"from="+D),location.replace(P)}}}})(window);