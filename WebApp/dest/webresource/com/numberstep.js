define(["libs"],function(){function e(e){var t=function(){},n={max:9,min:1,initialVal:1,step:1,html:'<i class="minus <%if(initialVal <= min ){ %>num_invalid<%} %>">-</i><span id="J_curNum"><%=initialVal %></span><i class="plus <%if(initialVal >= max ){ %>num_invalid<%} %>">+</i>',wrap:null,disableClass:"num_invalid",onChange:t,onMax:t,onMin:t};this.options=$.extend(n,e),this.wrap=this.options.wrap,this.renderHtml(),this.els={curNumDom:this.wrap.find("#J_curNum"),plusDom:this.wrap.find(".plus"),minusDom:this.wrap.find(".minus"),flagDom:this.wrap.find("i")},this.bindEvents()}return e.prototype={constructor:e,bindEvents:function(){var e=this;this.wrap.on("click","i",function(t){var n=$(t.target),r=parseInt(e.els.curNumDom.text().trim()),i=n.text().trim();if(n.hasClass(e.options.disableClass))return!1;"+"===i&&r<e.options.max?r++:"-"===i&&r>e.options.min?r--:r=e.options.min,e.els.flagDom.removeClass(e.options.disableClass),r===e.options.min&&(n.addClass(e.options.disableClass),e.options.onMin(t)),r===e.options.max&&(n.addClass(e.options.disableClass),e.options.onMax(t)),e.els.curNumDom.html(r),e.options.onChange(t)})},unbindEvents:function(){this.els.$numberStep.off("click")},_changeStatus:function(e,t){var n=t==="disable"?"addClass":"removeClass";"+"===e?this.els.plusDom[n](this.options.disableClass):"-"===e?this.els.minusDom[n](this.options.disableClass):this.els.flagDom[n](this.options.disableClass)},disable:function(e){this._changeStatus(e,"disable")},enable:function(e){this._changeStatus(e,"enable")},renderHtml:function(){this.wrap.html(_.template(this.options.html,this.options))},getCurrentNum:function(){return this.els.curNumDom.text().trim()}},e});